webpackJsonp([20],{3144:function(e,n,r){"use strict";function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r={};for(var t in e)n.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r}r.d(n,"b",function(){return a}),r.d(n,"a",function(){return i});var s,a=function(){return{type:"LOGIN_USER_SUCCESS",message:"User logged in successfully!"}},i=function(e){return{type:"LOGIN_USER_ERROR",message:e.error.message}},u=(s={},t(s,"LOGIN_USER_REQUEST",function(e,n){var r=(n.type,o(n,["type"]));return Object.assign({},u,{loading:!0,email:r.email})}),t(s,"LOGIN_USER_SUCCESS",function(e,n){var r=(n.type,o(n,["type"]));return Object.assign({},e,{successMessage:r.message,loading:!1})}),t(s,"LOGIN_USER_ERROR",function(e,n){var r=(n.type,o(n,["type"]));return Object.assign({},e,{loading:!1,errorMessage:r.message})}),{token:localStorage.getItem("token"),loading:!1,username:null,errorMessage:null,alertMessage:null})},546:function(e,n,r){"use strict";function t(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}Object.defineProperty(n,"__esModule",{value:!0});var o=r(261),s=(r.n(o),r(260)),a=r.n(s),i=r(27),u=r(11),l=(r.n(u),r(3144)),c=r(172),p=r(175),g=r(18),f=r.n(g),b=t(["\n    query ACCOUNT_INFO {\n        account {\n            ...CurrenUserInfo\n            possibleNetworkRoles\n            possibleProviderRoles\n            currentRole\n        }\n    }\n    ","\n"],["\n    query ACCOUNT_INFO {\n        account {\n            ...CurrenUserInfo\n            possibleNetworkRoles\n            possibleProviderRoles\n            currentRole\n        }\n    }\n    ","\n"]),d=t(["\n    mutation loginUser($input: LoginInput!) {\n        login(input: $input) {\n           ...CurrenUserInfo\n            possibleNetworkRoles\n            possibleProviderRoles\n            currentRole\n            checkToken\n        }\n    }\n    ","\n"],["\n    mutation loginUser($input: LoginInput!) {\n        login(input: $input) {\n           ...CurrenUserInfo\n            possibleNetworkRoles\n            possibleProviderRoles\n            currentRole\n            checkToken\n        }\n    }\n    ","\n"]),m=t(["\n    mutation forgotPassword($email:Email!) {\n       forgotPassword(email:$email)\n    }\n\n"],["\n    mutation forgotPassword($email:Email!) {\n       forgotPassword(email:$email)\n    }\n\n"]),O=f()(b,p.a.fragments.user),R=f()(d,p.a.fragments.user),w=f()(m),v=Object(u.graphql)(w,{props:function(e){var n=e.mutate;return{forgotPassword:function(e){return n({variables:{email:e.email}})}}}}),U=Object(u.graphql)(R,{props:function(e){var n=e.mutate;return{loginUser:function(e){return n({variables:{input:{email:e.email,password:e.password}},update:function(e,n){var r=n.data.login,t=e.readQuery({query:O}),o=Object.assign({},t,{account:Object.assign({},t.account,r)});e.writeQuery({query:O,data:o})}})}}}}),j=function(e){return{allowSignUp:e.network.allowSignUp,token:e.user.token,loading:e.user.loading}},y=function(e,n){return{onSubmit:function(r){var t=r.email,o=r.password;e(Object(c.e)()),n.loginUser({email:t,password:o}).then(function(n){var r=n.data,t=r.login.token,o=r.login.user;o.token=t,e(Object(c.c)(o)),e(Object(l.b)({token:t}))}).catch(function(n){e(Object(c.d)({error:n})),e(Object(l.a)({error:n}))})},onClick:function(e){var r=e.forgot_email;n.forgotPassword({email:r}).then(function(e){e.data;n.history.push("/password/reset"),a.a.success("Reset password link has been sent")})}}};n.default=Object(u.compose)(U,v,Object(i.b)(j,y))(p.a)}});
//# sourceMappingURL=loginChunk.f8124128.chunk.js.map