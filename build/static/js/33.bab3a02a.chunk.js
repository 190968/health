webpackJsonp([33],{1178:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),u=n(1),c=n.n(u),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return s.state={},s.styles={ellipsis:{position:"fixed",visibility:"hidden",top:0,left:0}},s.elements={},s.onResize=s.onResize.bind(s),s.onTruncate=s.onTruncate.bind(s),s.calcTargetWidth=s.calcTargetWidth.bind(s),s.measureWidth=s.measureWidth.bind(s),s.getLines=s.getLines.bind(s),s.renderLine=s.renderLine.bind(s),s}return o(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this.elements.text,t=this.calcTargetWidth,n=this.onResize,r=document.createElement("canvas");this.canvasContext=r.getContext("2d"),t(function(){e&&e.parentNode.removeChild(e)}),window.addEventListener("resize",n)}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.forceUpdate()}},{key:"componentWillUnmount",value:function(){var e=this.elements.ellipsis,t=this.onResize,n=this.timeout;e.parentNode.removeChild(e),window.removeEventListener("resize",t),window.cancelAnimationFrame(n)}},{key:"innerText",value:function(e){var t=document.createElement("div"),n="innerText"in window.HTMLElement.prototype?"innerText":"textContent";t.innerHTML=e.innerHTML.replace(/\r\n|\r|\n/g," ");var r=t[n],a=document.createElement("div");return a.innerHTML="foo<br/>bar","foo\nbar"!==a[n].replace(/\r\n|\r/g,"\n")&&(t.innerHTML=t.innerHTML.replace(/<br.*?[\/]?>/gi,"\n"),r=t[n]),r}},{key:"onResize",value:function(){this.calcTargetWidth()}},{key:"onTruncate",value:function(e){var t=this.props.onTruncate;"function"===typeof t&&(this.timeout=window.requestAnimationFrame(function(){t(e)}))}},{key:"calcTargetWidth",value:function(e){var t=this.elements.target,n=this.calcTargetWidth,r=this.canvasContext;if(t){var a=Math.floor(t.parentNode.getBoundingClientRect().width);if(!a)return window.requestAnimationFrame(function(){return n(e)});var i=window.getComputedStyle(t),o=[i["font-weight"],i["font-style"],i["font-size"],i["font-family"]].join(" ");r.font=o,this.setState({targetWidth:a},e)}}},{key:"measureWidth",value:function(e){return this.canvasContext.measureText(e).width}},{key:"ellipsisWidth",value:function(e){return e.offsetWidth}},{key:"trimRight",value:function(e){return e.replace(/\s+$/,"")}},{key:"getLines",value:function(){for(var e=this.elements,t=this.props,n=t.lines,r=t.ellipsis,a=t.trimWhitespace,i=this.state.targetWidth,o=this.innerText,s=this.measureWidth,u=this.onTruncate,c=this.trimRight,p=[],f=o(e.text),d=f.split("\n").map(function(e){return e.split(" ")}),m=!0,h=this.ellipsisWidth(this.elements.ellipsis),y=1;y<=n;y++){var b=d[0];if(0!==b.length){var g=b.join(" ");if(s(g)<=i&&1===d.length){m=!1,p.push(g);break}if(y===n){for(var v=b.join(" "),E=0,w=v.length-1;E<=w;){var O=Math.floor((E+w)/2);s(v.slice(0,O+1))+h<=i?E=O+1:w=O-1}var j=v.slice(0,E);if(a)for(j=c(j);!j.length&&p.length;){var _=p.pop();j=c(_)}g=l.a.createElement("span",null,j,r)}else{for(var x=0,M=b.length-1;x<=M;){var I=Math.floor((x+M)/2);s(b.slice(0,I+1).join(" "))<=i?x=I+1:M=I-1}if(0===x){y=n-1;continue}g=b.slice(0,x).join(" "),d[0].splice(0,x)}p.push(g)}else p.push(),d.shift(),y--}return u(m),p}},{key:"renderLine",value:function(e,t,n){if(t===n.length-1)return l.a.createElement("span",{key:t},e);var r=l.a.createElement("br",{key:t+"br"});return e?[l.a.createElement("span",{key:t},e),r]:r}},{key:"render",value:function(){var e=this,t=this.elements.target,n=this.props,a=n.children,i=n.ellipsis,o=n.lines,s=r(n,["children","ellipsis","lines"]),u=this.state.targetWidth,c=this.getLines,f=this.renderLine,d=this.onTruncate,m=void 0,h=!(!t||!u);return"undefined"!==typeof window&&h&&(o>0?m=c().map(f):(m=a,d(!1))),delete s.onTruncate,delete s.trimWhitespace,l.a.createElement("span",p({},s,{ref:function(t){e.elements.target=t}}),l.a.createElement("span",null,m),l.a.createElement("span",{ref:function(t){e.elements.text=t}},a),l.a.createElement("span",{ref:function(t){e.elements.ellipsis=t},style:this.styles.ellipsis},i))}}]),t}(s.Component);d.propTypes={children:c.a.node,ellipsis:c.a.node,lines:c.a.oneOfType([c.a.oneOf([!1]),c.a.number]),trimWhitespace:c.a.bool,onTruncate:c.a.func},d.defaultProps={children:"",ellipsis:"\u2026",lines:1,trimWhitespace:!1},t.a=d},1481:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h});var o=n(154),s=(n.n(o),n(117)),l=n.n(s),u=n(0),c=n.n(u),p=n(258),f=n(1178),d=n(17),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),m(t,[{key:"render",value:function(){var e=this.props,t=e.info,n=e.align,r=e.useLink,a=t.firstName?t.firstName:t.fullName&&" "!==t.fullName?t.fullName:t.email?t.email:"N/A",i=c.a.createElement("span",null,c.a.createElement(p.b,{info:t})," ",c.a.createElement("span",{style:{verticalAlign:"middle",marginLeft:5}},a));return r&&(i=c.a.createElement(d.b,{to:"/u/"+t.id,style:{color:"inherit"}},i)),c.a.createElement(c.a.Fragment,null,"v"===n?t.firstName?c.a.createElement(l.a,null,c.a.createElement(p.b,{info:t}),c.a.createElement("p",null,t.firstName)):t.email?c.a.createElement(l.a,null,c.a.createElement(p.b,{info:t}),c.a.createElement(f.a,{lines:2},c.a.createElement("p",null,t.email))):c.a.createElement("center",null,c.a.createElement(p.b,{info:t}),c.a.createElement("p",null,"No name")):i)}}]),t}(c.a.PureComponent);h.defaultProps={info:{},align:"h",useLink:!0},t.b=h},3382:function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(36),i=n(25),o=(n.n(i),n(3383)),s=n(23),l=n.n(s),u=r(["\n query GET_DISCUSSION($id:UID) {\n   user{\n    id\n    firstName\n            thumbs {\n                small\n                large\n                medium\n            }\n    fullName\n  }\n    discussion(id:$id) {\n         id\n         title\n         text\n         createdAt\n         category {\n           id\n           isJoined\n           canJoin\n           name\n         }\n         author {\n            id\n         }\n         views\n         replies {\n              totalCount\n              edges{\n                    id\n                    text\n                    date\n                    createdAt\n                    isImportant\n                    unread\n                    replies {\n                      totalCount\n                      edges{\n                            id\n                            text\n                            date\n                            createdAt\n                            isImportant\n                            unread\n                      }\n                  }    \n              }\n          }      \n    }\n}\n"],["\n query GET_DISCUSSION($id:UID) {\n   user{\n    id\n    firstName\n            thumbs {\n                small\n                large\n                medium\n            }\n    fullName\n  }\n    discussion(id:$id) {\n         id\n         title\n         text\n         createdAt\n         category {\n           id\n           isJoined\n           canJoin\n           name\n         }\n         author {\n            id\n         }\n         views\n         replies {\n              totalCount\n              edges{\n                    id\n                    text\n                    date\n                    createdAt\n                    isImportant\n                    unread\n                    replies {\n                      totalCount\n                      edges{\n                            id\n                            text\n                            date\n                            createdAt\n                            isImportant\n                            unread\n                      }\n                  }    \n              }\n          }      \n    }\n}\n"]),c=r(["\n   mutation discussionReply($id:UID!,$parentMessageId:UID,$message:String!) {\n\n  discussionReply(id:$id,parentMessageId:$parentMessageId,message:$message) {\n         id\n         text\n    createdAt\n    isImportant\n    unread\n       }\n}\n\n"],["\n   mutation discussionReply($id:UID!,$parentMessageId:UID,$message:String!) {\n\n  discussionReply(id:$id,parentMessageId:$parentMessageId,message:$message) {\n         id\n         text\n    createdAt\n    isImportant\n    unread\n       }\n}\n\n"]),p=r(["\n  mutation discussionDelete($id:UID!) {\n\n  discussionDelete(id:$id) \n}\n"],["\n  mutation discussionDelete($id:UID!) {\n\n  discussionDelete(id:$id) \n}\n"]),f=l()(u),d=l()(c),m=l()(p),h=Object(i.graphql)(f,{options:function(e){return{pollInterval:2e4,variables:{id:e.match.params.id},fetchPolicy:"network-only"}},props:function(e){var t=e.data;return t.loading?{loading:t.loading}:{user:t.user,discussion:t.discussion,loading:t.loading}}})(o.a),y=Object(i.graphql)(d,{props:function(e){var t=e.mutate,n=e.ownProps;return{discussionReply:function(e,r,a){return t({variables:{id:r,message:e,parentMessageId:a},refetchQueries:[{query:f,variables:{id:n.match.params.id}}]})}}}}),b=Object(i.graphql)(m,{props:function(e){var t=(e.ownProps,e.mutate);return{discussionDelete:function(e){return t({variables:{id:e}})}}}}),g=Object(i.compose)(y,b),v=function(e){return{}},E=function(e,t){return{onSubmit:function(e){return t.discussionReply(e.text,t.match.params.id)}}};t.default=g(Object(a.b)(v,E)(h))},3383:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(112),s=(n.n(o),n(111)),l=n.n(s),u=n(0),c=n.n(u),p=n(17),f=n(3384),d=n(3386),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(){var e,n,i,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.handleSubmit=function(e){e.preventDefault();var t=i.props.onSubmit;i.props.form.validateFields(function(e,n){return t(n)})},o=n,a(i,o)}return i(t,e),m(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.discussion,r=e.user,a=e.handleBreadcrumbChange;if(t)return c.a.createElement(l.a,{loading:!0},"Loading!!!");a([["aaa","bbbb"]]);var i=n.title,o=n.id,s=n.text,u=n.createdAt,p=n.category,m=n.author,h=n.replies;return c.a.createElement("div",null,c.a.createElement(f.a,{user:r,discussion:{title:i,category:p,id:o,text:s,author:m,createdAt:u},discussionDelete:this.props.discussionDelete}),c.a.createElement(d.a,{user:r,discussion:{id:o,category:p,replies:h},onSubmit:this.props.onSubmit,discussionReply:this.props.discussionReply}))}}]),t}(c.a.Component);t.a=Object(p.g)(h)},3384:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(153),s=(n.n(o),n(115)),l=n.n(s),u=n(154),c=(n.n(u),n(117)),p=n.n(c),f=n(501),d=(n.n(f),n(479)),m=n.n(d),h=n(251),y=(n.n(h),n(113)),b=n.n(y),g=n(35),v=(n.n(g),n(15)),E=n.n(v),w=n(112),O=(n.n(w),n(111)),j=n.n(O),_=n(0),x=n.n(_),M=n(1481),I=n(148),T=n.n(I),P=n(17),R=n(29),S=n(3385),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C=function(e){function t(){var e,n,i,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.handleClick=function(){var e=i.props,t=e.discussion,n=e.discussionDelete,r=e.history;n(t.id).then(function(e){e.data;r.push("/community/"+t.category.id)})},o=n,a(i,o)}return i(t,e),k(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.discussion,r=e.user;if(t)return x.a.createElement(j.a,{loading:!0},"Loading!!!");var a=n.title,i=n.text,o=n.author,s=n.createdAt,u=o.id,c=this.props.intl;return x.a.createElement(j.a,{title:a,extra:x.a.createElement("div",null,u===r.id?x.a.createElement(m.a,{title:c.formatMessage(S.a.popconfirm),onConfirm:this.handleClick,okText:c.formatMessage(S.a.yes),cancelText:c.formatMessage(S.a.no)},x.a.createElement(b.a,{title:c.formatMessage(S.a.delete)},x.a.createElement(E.a,{type:"close"}))):null)},x.a.createElement(p.a,null,x.a.createElement("p",null,i)),x.a.createElement(p.a,null,x.a.createElement(l.a,{span:2},x.a.createElement(M.b,{info:r}))),x.a.createElement(p.a,null,x.a.createElement("label",null,T()(s).format("LLL"))))}}]),t}(x.a.Component);t.a=Object(P.g)(Object(R.g)(C))},3385:function(e,t,n){"use strict";var r=n(29);t.a=Object(r.f)({popconfirm:{id:"popconfirm.title",defaultMessage:"Are you sure delete this discussion?"},yes:{id:"community.Yes",defaultMessage:"Yes"},no:{id:"community.no",defaultMessage:"No"},delete:{id:"community.delete",defaultMessage:"Delete"}})},3386:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(112),s=(n.n(o),n(111)),l=n.n(s),u=n(0),c=n.n(u),p=n(17),f=n(3387),d=n(3393),m=n(29),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),h(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.discussion,r=e.user;if(t)return c.a.createElement(l.a,{loading:!0},"Loading!!!");var a=n.replies;return c.a.createElement(l.a,{title:"Replies"},c.a.createElement(d.a,{discussion:n,user:r,onSubmit:this.props.onSubmit}),c.a.createElement(f.a,{discussion:{replies:a},user:r,discussionReply:this.props.discussionReply}))}}]),t}(c.a.Component);t.a=Object(p.g)(Object(m.g)(y))},3387:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(154),s=(n.n(o),n(117)),l=n.n(s),u=n(453),c=(n.n(u),n(452)),p=n.n(c),f=n(251),d=(n.n(f),n(113)),m=n.n(d),h=n(112),y=(n.n(h),n(111)),b=n.n(y),g=n(35),v=(n.n(g),n(15)),E=n.n(v),w=n(0),O=n.n(w),j=n(258),_=n(17),x=n(3388),M=n(3389),I=n(148),T=n.n(I),P=n(29),R=n(3392),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=function(e){var t=e.type,n=e.text;return O.a.createElement("span",null,O.a.createElement(E.a,{type:t,style:{marginRight:8}}),n)},C=function(e){function t(){var e,n,i,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.state={visibleReplyModal:!1,id:null,title:""},i.showModal=function(e){i.setState({visibleReplyModal:!0,id:e})},i.unshowModal=function(){i.setState({visibleReplyModal:!1})},o=n,a(i,o)}return i(t,e),S(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.loading,r=t.discussion;if(n)return O.a.createElement(b.a,{loading:!0},"Loading!!!");var a=this.props.intl,i=r.replies,o=i.edges;return O.a.createElement("div",null,this.state.visibleReplyModal&&O.a.createElement(M.a,{params:this.state.id,unshowModal:this.unshowModal,parentMessageId:this.props.match.params.id}),O.a.createElement(l.a,null,o.length>0?O.a.createElement(p.a,{loading:n,itemLayout:"vertical",dataSource:o,renderItem:function(t){return O.a.createElement(p.a.Item,{key:t.id,actions:[T()(t.createdAt).format("LLL"),O.a.createElement(k,{type:"like-o",text:"0"}),O.a.createElement(k,{type:"message",text:t.replies.totalCount,onClick:e.showModal.bind(e,t.id)}),O.a.createElement(m.a,{title:"Reply"},O.a.createElement("p",{onClick:e.showModal.bind(e,t.id)},a.formatMessage(R.a.reply)))]},O.a.createElement(p.a.Item.Meta,{avatar:O.a.createElement(j.b,{info:e.props.user})}),t.text,t.replies.totalCount>0?O.a.createElement(x.a,{discussion:t.replies,discussionReply:e.props.discussionReply}):null)}}):O.a.createElement("div",{style:{textAlign:"center"}},"No Replies")))}}]),t}(O.a.Component);t.a=Object(_.g)(Object(P.g)(C))},3388:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(453),s=(n.n(o),n(452)),l=n.n(s),u=n(463),c=(n.n(u),n(460)),p=n.n(c),f=n(35),d=(n.n(f),n(15)),m=n.n(d),h=n(0),y=n.n(h),b=n(17),g=n(148),v=n.n(g),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=function(e){var t=e.type,n=e.text;return y.a.createElement("span",null,y.a.createElement(m.a,{type:t,style:{marginRight:8}}),n)},O=function(e){function t(){var e,n,i,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.state={visible:!1,id:null},o=n,a(i,o)}return i(t,e),E(t,[{key:"render",value:function(){var e=this.props.discussion,t=e.edges;return y.a.createElement("div",null,t.length>0?y.a.createElement("div",null,y.a.createElement(l.a,{style:{marginLeft:24},itemLayout:"vertical",dataSource:t,renderItem:function(e){return y.a.createElement(l.a.Item,{key:e.id,actions:[v()(e.createdAt).format("LLL"),y.a.createElement(w,{type:"like-o",text:"0"})]},y.a.createElement(l.a.Item.Meta,{avatar:y.a.createElement(p.a,{size:"large"})}),e.text)}})):y.a.createElement("div",null,"No replies"))}}]),t}(y.a.Component);t.a=Object(b.g)(O)},3389:function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var a=n(36),i=n(25),o=(n.n(i),n(3390)),s=n(23),l=n.n(s),u=r(["\n query GET_DISCUSSION($id:UID) {\n   user{\n    id\n  }\n    discussion(id:$id) {\n         id\n         title\n         text\n         createdAt\n         category {\n           id\n           isJoined\n           canJoin\n           name\n         }\n         author {\n            id\n         }\n         views\n         replies {\n              totalCount\n              edges{\n                    id\n                    text\n                    date\n                    createdAt\n                    isImportant\n                    unread\n                    replies {\n                      totalCount\n                      edges{\n                            id\n                            text\n                            date\n                            createdAt\n                            isImportant\n                            unread\n                      }\n                  }    \n              }\n          }      \n    }\n}\n"],["\n query GET_DISCUSSION($id:UID) {\n   user{\n    id\n  }\n    discussion(id:$id) {\n         id\n         title\n         text\n         createdAt\n         category {\n           id\n           isJoined\n           canJoin\n           name\n         }\n         author {\n            id\n         }\n         views\n         replies {\n              totalCount\n              edges{\n                    id\n                    text\n                    date\n                    createdAt\n                    isImportant\n                    unread\n                    replies {\n                      totalCount\n                      edges{\n                            id\n                            text\n                            date\n                            createdAt\n                            isImportant\n                            unread\n                      }\n                  }    \n              }\n          }      \n    }\n}\n"]),c=r(["\n   mutation discussionReply($id:UID!,$parentMessageId:UID,$message:String!) {\n  discussionReply(id:$id,parentMessageId:$parentMessageId,message:$message) {\n         id\n         text\n    createdAt\n    isImportant\n    unread\n       }\n}\n"],["\n   mutation discussionReply($id:UID!,$parentMessageId:UID,$message:String!) {\n  discussionReply(id:$id,parentMessageId:$parentMessageId,message:$message) {\n         id\n         text\n    createdAt\n    isImportant\n    unread\n       }\n}\n"]),p=l()(u),f=l()(c),d=Object(i.graphql)(f,{props:function(e){var t=e.mutate,n=e.ownProps;return{discussionReply:function(e,r,a){return t({variables:{id:r,message:e,parentMessageId:a},refetchQueries:[{query:p,variables:{id:r}}]}).then(function(e){e.data;n.unshowModal()})}}}}),m=Object(i.compose)(d),h=function(e){return{}},y=function(e,t){return{onSubmit:function(e){return t.discussionReply(e.text,t.match.params.id)}}};t.a=m(Object(a.b)(h,y)(o.a))},3390:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(151),s=(n.n(o),n(150)),l=n.n(s),u=n(35),c=(n.n(u),n(15)),p=n.n(c),f=n(110),d=(n.n(f),n(109)),m=n.n(d),h=n(70),y=(n.n(h),n(149)),b=n.n(y),g=n(0),v=n.n(g),E=n(17),w=n(29),O=n(3391),j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=b.a.TextArea,x=m.a.Item,M=function(e){function t(){var e,n,i,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.state={visible:!0,title:""},i.handleCancel=function(e){i.setState({visible:!1})},i.handleModalSubmit=function(){var e=i.props.discussionReply;i.props.form.validateFields(function(t,n){if(null!=t)return null;e(n.textReply,i.props.match.params.id,i.props.params)})},o=n,a(i,o)}return i(t,e),j(t,[{key:"render",value:function(){var e=this.props.intl,t=this.props.form.getFieldDecorator;return v.a.createElement(l.a,{title:e.formatMessage(O.a.reply),visible:!0,onCancel:this.props.unshowModal,okText:e.formatMessage(O.a.send),onOk:this.handleModalSubmit},v.a.createElement(m.a,{onSubmit:this.handleModalSubmit},v.a.createElement(x,null,t("textReply",{initialValue:this.state.title,rules:[{required:!0,message:"Input text Please",whitespace:!0}]})(v.a.createElement(_,{suffix:v.a.createElement(p.a,{type:"paper-clip"}),autosize:{minRows:2}})))))}}]),t}(v.a.Component),I=m.a.create()(M);t.a=Object(E.g)(Object(w.g)(I))},3391:function(e,t,n){"use strict";var r=n(29);t.a=Object(r.f)({reply:{id:"reply",defaultMessage:"Reply"},send:{id:"send",defaultMessage:"Send"}})},3392:function(e,t,n){"use strict";var r=n(29);t.a=Object(r.f)({reply:{id:"reply",defaultMessage:"Reply"},send:{id:"send",defaultMessage:"Send"}})},3393:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(154),s=(n.n(o),n(117)),l=n.n(s),u=n(45),c=(n.n(u),n(34)),p=n.n(c),f=n(35),d=(n.n(f),n(15)),m=n.n(d),h=n(153),y=(n.n(h),n(115)),b=n.n(y),g=n(70),v=(n.n(g),n(149)),E=n.n(v),w=n(110),O=(n.n(w),n(109)),j=n.n(O),_=n(0),x=n.n(_),M=n(258),I=n(3394),T=n(29),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),R=j.a.Item,S=E.a.TextArea,k=function(e){function t(){var e,n,i,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.handleSubmit=function(e){e.preventDefault();var t=i.props.onSubmit;i.props.form.validateFields(function(e,n){return null!=e?null:t(n).then(function(e){e.data;i.props.form.resetFields()})})},o=n,a(i,o)}return i(t,e),P(t,[{key:"render",value:function(){var e=this.props,t=e.discussion,n=e.user,r=t.category,a=r.isJoined,i=this.props.intl,o=this.props.form.getFieldDecorator;return x.a.createElement(j.a,{onSubmit:this.handleSubmit},x.a.createElement(l.a,{type:"flex",justify:"space-between",align:"middle"},x.a.createElement(b.a,{span:2},x.a.createElement(M.b,{info:n})),x.a.createElement(b.a,{span:19},x.a.createElement(R,{style:{margin:0}},o("text",{rules:[{required:!0,message:"Input text Please",whitespace:!0}]})(x.a.createElement(S,{suffix:x.a.createElement(m.a,{type:"paper-clip"}),autosize:{minRows:2}})))),x.a.createElement(b.a,{offset:1,span:2},a?x.a.createElement(p.a,{type:"primary",size:"large",htmlType:"submit"},i.formatMessage(I.a.post)):x.a.createElement(p.a,{disabled:!0,type:"primary",size:"large",htmlType:"submit"},i.formatMessage(I.a.post)))))}}]),t}(x.a.Component),C=j.a.create()(k);t.a=Object(T.g)(C)},3394:function(e,t,n){"use strict";var r=n(29);t.a=Object(r.f)({post:{id:"post",defaultMessage:"Post"}})}});
//# sourceMappingURL=33.bab3a02a.chunk.js.map